
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>2.5.4.2. Lab 4.2: Deploy our SSG in AWS &#8212; BIG-IQ - Infrastructure and Application owners reunite! Automation and visibility into your App.  documentation</title>
    
    <link rel="stylesheet" href="../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/f5_agility_theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/f5.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="2.5.4.3. Lab 4.3: Review our SSG deployment in AWS" href="lab3.html" />
    <link rel="prev" title="2.5.4.1. Lab 4.1: Prepare our AWS deployment" href="lab1.html" />
<!--
# Copyright 2017 F5 Networks
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
-->
<link href="https://cdn.f5.com/favicon.ico" rel="icon">
<script src="https://use.fontawesome.com/21fb8a09c3.js"></script>
<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>
  <body>
  <nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <div class="row corp-header">
      <div class="container corp-header">
        <div class="container corp-menu">
          <ul>
            <li><a href="https://f5.com" class="internalLink">F5.com</a></li>
            <li><a href="https://support.f5.com">Support</a></li>
            <li><a href="https://devcentral.f5.com">Community</a></li>
            <li><a href="https://github.com/F5Networks">GitHub</a></li>
            <li><a href="https://f5.com/about-us/careers">Careers</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="row pageHeader">
      <div class="container stat">
        <div class="col-xs-12 stat">
          <a class="internalLink" href="https://f5.com">
            <img class="logo" src="https://cdn.f5.com/websites/support/assets/images/logo.svg" width="50" height="44" alt="F5 Networks" title="F5 Networks" border="0">
          </a>
            <ul id="MainMenu" class="main-menu">
              <li>
                <a href="#">Products
                  <span class="indicator"><span class="arrow-up"></span></span>
                </a>

                <div class="menu-panel soft-hide" id="ProductsSubmenu">
                  <div class="container">
                    <ul class="submenu col-sm-11">
                      <li class="third"><span class="a-mm-h">Connectors</span>
                        <ul>
                          <li><a href="/products/connectors/marathon-bigip-ctlr/latest" data-link-type="Nav: Mega">F5 Marathon BIG-IP Controller</a></li>
                          <li><a href="/products/connectors/marathon-asp-ctlr/latest" data-link-type="Nav: Mega">F5 Marathon ASP Controller</a></li>
                          <li><a href="/products/connectors/k8s-bigip-ctlr/latest" data-link-type="Nav: Mega">F5 Kubernetes BIG-IP Controller</a></li>
                          <li><a href="/products/connectors/f5-kube-proxy/latest" data-link-type="Nav: Mega">F5 Kubernetes Proxy</a></li>
                        </ul>
                        <!--span class="seemore"><a data-link-type="Nav: Mega" href="/products/connectors">See all </a></--span-->
                      </li>
                      <li class="divider"></li>
                      <li class="third"><span class="a-mm-h">Application Services Proxy</span>
                        <ul>
                          <li><a href="/products/asp/latest" data-link-type="Nav: Mega">F5 Application Services Proxy</a></li>
                        </ul>
                        <!--span class="seemore"><a href="/products/">See all </a></span-->
                      </li>
                    </ul>
                  </div>
                </div>
              </li>
              <li>
                <a href="#">Container Integrations
                  <span class="indicator"><span class="arrow-up"></span></span>
                </a>

                <div class="menu-panel soft-hide" id="ContainersSubmenu">
                  <div class="container">
                    <ul class="submenu col-sm-11">
                      <li class="third"><span class="a-mm-h">Container Integrations</span>
                        <ul>
                          <li><a href="/containers/latest/marathon/" data-link-type="Nav: Mega">Mesos Marathon</a></li>
                          <li><a href="/containers/latest/kubernetes/" data-link-type="Nav: Mega">Kubernetes</a></li>
                          <li><a href="/containers/latest/openshift/" data-link-type="Nav: Mega">RedHat OpenShift</a></li>
                        </ul>
                        <span class="seemore"><a data-link-type="Nav: Mega" href="/containers/latest/">View details </a></span>
                      </li>
                    </ul>
                  </div>
                </div>
              </li>
              <li>
                <a href="#">Clouds
                  <span class="indicator"><span class="arrow-up"></span></span>
                </a>

                <div class="menu-panel soft-hide" id="CloudsSubmenu">
                  <div class="container">
                    <ul class="submenu col-sm-11">
                      <li class="third"><span class="a-mm-h">Cloud Integrations</span>
                        <ul>
                          <li><a href="/cloud/openstack/" data-link-type="Nav: Mega">OpenStack</a></li>
                        </ul>
                        <!--span class="seemore"><a data-link-type="Nav: Mega" href="/cloud/">See all </a></span-->
                      </li>
                    </ul>
                  </div>
                </div>
              </li>
              <li>
                <a href="#">Resources
                  <span class="indicator"><span class="arrow-up"></span></span>
                </a>
                <div class="menu-panel soft-hide" id="UPCProgramSubmenu">
                  <div class="container">
                    <ul class="submenu col-sm-11">
                      <li class="third">
                        <span class="a-mm-h">Downloads</span>
                        <ul>
                          <li><a target="_blank" data-link-type="Nav: Mega" href="https://hub.docker.com/r/f5networks/" class="internalLink">Docker Hub</a></li>
                          <li><a target="_blank" data-link-type="Nav: Mega" href="https://store.docker.com/images/f5networks-asp" class="internalLink">Docker Store</a></li>
                        </ul>
                      </li>
                      <li class="divider"></li>

                      <li class="third">
                        <span class="a-mm-h">OpenSource</span>
                        <ul>
                          <li><a target="_blank" data-link-type="Nav: Mega" href="https://github.com/F5Networks" class="internalLink">GitHub</a></li>
                        </ul>
                      </li>
                      <li class="divider"></li>

                      <li class="third">
                        <a href="//university.f5.com" class="a-mm-h internalLink" target="_blank" data-link-type="Nav: Mega">F5 University</a>
                        <ul>
                          <li>
                            <p>Get up to speed with free self-paced courses</p>
                          </li>
                        </ul>
                        <a data-ng-href="https://devcentral.f5.com" class="a-mm-h internalLink" target="_blank" data-link-type="Nav: Mega" href="https://devcentral.f5.com">DevCentral</a>
                        <ul>
                          <li>
                            <p>Join the community of 250,000+ technical peers</p>
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </div>
                </div>
              </li>
            </ul>
        </div>
      </div>
    </div>
  </div> <!-- /container-fluid -->
</nav>

  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-3 col-md-3 sidebar">
         <h4><a href="../../">BIG-IQ - Infrastructure and Application owners reunite! Automation and visibility into your App. </a></h4>
<div id="searchbox" style="display: none" role="search">
  <form class="search" action="../../search.html" method="get">
    <div>
      <input type="text" name="q" placeholder="Search" style="padding-left: 6px;"/>
      <!-- <input type="submit" value="Go" style="margin-top: 4px;"/> -->
      <button type="submit" class="btn btn-primary btn-xs">Go</button>
    </div>
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <p class="caption">
   <span class="caption-text">Current Page</span>
  </p>
  <ul>
<li><a class="reference internal" href="#">2.5.4.2. Lab 4.2: Deploy our <code class="docutils literal"><span class="pre">SSG</span></code> in <code class="docutils literal"><span class="pre">AWS</span></code></a><ul>
<li><a class="reference internal" href="#retrieve-our-big-ip-sea-public-ip">2.5.4.2.1. Retrieve our BIG-IP SEA Public IP</a></li>
<li><a class="reference internal" href="#launch-our-ssg-access-our-orchestrator">2.5.4.2.2. Launch our <code class="docutils literal"><span class="pre">SSG</span></code> - Access our orchestrator</a></li>
<li><a class="reference internal" href="#launch-our-ssg-update-config-yml">2.5.4.2.3. Launch our <code class="docutils literal"><span class="pre">SSG</span></code> - Update config.yml</a></li>
<li><a class="reference internal" href="#launch-our-ssg-update-our-ssg-configuration">2.5.4.2.4. Launch our <code class="docutils literal"><span class="pre">SSG</span></code> - Update our SSG configuration</a></li>
<li><a class="reference internal" href="#launch-our-ssg-trigger-the-deployment">2.5.4.2.5. Launch our <code class="docutils literal"><span class="pre">SSG</span></code> - Trigger the deployment</a></li>
</ul>
</li>
</ul>


<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../class1/class1.html">1. Class 1: BIG-IQ Application Creation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../class2.html">2. Class 2: BIG-IQ Deployment with auto-scale</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../intro.html">2.1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../module1/module1.html">2.2. Module 1: Setup a Service scaling group (SSG) in VMWARE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../module2/module2.html">2.3. Module 2: Deploy an application on a SSG (VMWare)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../module3/module3.html">2.4. Module 3: Upgrade - Scaling up a SSG</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="module4.html">2.5. Module 4: Setup a Service scaling group (SSG) in AWS</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../class3/class3.html">3. Class 3:  BIG-IQ Analytics</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="lab1.html"
                        title="previous chapter">2.5.4.1. Lab 4.1: Prepare our <code class="docutils literal"><span class="pre">AWS</span></code> deployment</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="lab3.html"
                        title="next chapter">2.5.4.3. Lab 4.3: Review our <code class="docutils literal"><span class="pre">SSG</span></code> deployment in <code class="docutils literal"><span class="pre">AWS</span></code></a></p>
        
      </div>
      <div class="col-md-offset-3 col-sm-offset-3 main">
        <h4>
          <a href="/">Community Training Classes &amp; Labs</a> &gt; <a href="../../index.html">BIG-IQ - Infrastructure and Application owners reunite! Automation and visibility into your App.</a>
          <span class="right"><a href="../../genindex.html">Index</a></span>
        </h4>
        
  <div class="section" id="lab-4-2-deploy-our-ssg-in-aws">
<h1>2.5.4.2. Lab 4.2: Deploy our <code class="docutils literal"><span class="pre">SSG</span></code> in <code class="docutils literal"><span class="pre">AWS</span></code><a class="headerlink" href="#lab-4-2-deploy-our-ssg-in-aws" title="Permalink to this headline">¶</a></h1>
<p>Since we have already seen the different components needed to deploy a <code class="docutils literal"><span class="pre">SSG</span></code> successfully,
we will automatically deploy it and review its configuration.</p>
<div class="section" id="retrieve-our-big-ip-sea-public-ip">
<h2>2.5.4.2.1. Retrieve our BIG-IP SEA Public IP<a class="headerlink" href="#retrieve-our-big-ip-sea-public-ip" title="Permalink to this headline">¶</a></h2>
<p>We will establish a <code class="docutils literal"><span class="pre">VPN</span></code> connection between our <code class="docutils literal"><span class="pre">UDF</span></code> environment and <code class="docutils literal"><span class="pre">AWS</span></code>.
This will be setup automatically with our BIG-IP SEA as one of the <code class="docutils literal"><span class="pre">VPN</span> <span class="pre">endpoint</span></code>.</p>
<p>In your <code class="docutils literal"><span class="pre">UDF</span></code> blueprint, find your BIG-IP called <strong>SEA-vBIGIP01.termmarc.com.v13.1.0.5 (VPN)</strong>
and click on <strong>Access</strong> &gt; <strong>TMUI</strong>. It will open a new tab in your browser to access its GUI.</p>
<p>Here copy the <code class="docutils literal"><span class="pre">hostname</span></code> you see in your browser :</p>
<a class="reference internal image-reference" href="../../_images/img_module4_lab2_2.png"><img alt="../../_images/img_module4_lab2_2.png" class="align-center" src="../../_images/img_module4_lab2_2.png" style="width: 871.0px; height: 90.0px;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Ping this <code class="docutils literal"><span class="pre">hostname</span></code> to retrieve its IP Address:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span>PAR-ML-00026375:~ menant$ ping 443cbace-334b-491d-8b10-3772c26d70bb.access.udf.f5.com
PING 443cbace-334b-491d-8b10-3772c26d70bb.access.udf.f5.com (129.146.155.127): 56 data bytes
Request timeout for icmp_seq 0
</pre></div>
</div>
<p>In the example above, we can see that our public IP is <strong>129.146.155.127</strong>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">the ping will fail, it’s fine. we just needed to retrieve the public IP</p>
</div>
</div>
<div class="section" id="launch-our-ssg-access-our-orchestrator">
<h2>2.5.4.2.2. Launch our <code class="docutils literal"><span class="pre">SSG</span></code> - Access our orchestrator<a class="headerlink" href="#launch-our-ssg-access-our-orchestrator" title="Permalink to this headline">¶</a></h2>
<p>To setup <code class="docutils literal"><span class="pre">BIG-IQ</span></code> and <code class="docutils literal"><span class="pre">AWS</span></code> automatically, open a <code class="docutils literal"><span class="pre">SSH</span></code> connection on the
UDF system called: <strong>Ubuntu 16.04 Lamp Server, Radius and DHCP</strong></p>
<a class="reference internal image-reference" href="../../_images/img_module4_lab2_1.png"><img alt="../../_images/img_module4_lab2_1.png" class="align-center" src="../../_images/img_module4_lab2_1.png" style="width: 391.0px; height: 276.0px;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Once connected via <code class="docutils literal"><span class="pre">SSH</span></code>, go into the folder: <strong>AWS-CFT-Cloud-Edition</strong>:</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">cd</span> <span class="pre">AWS-CFT-Cloud-Edition/</span></code></div></blockquote>
<p>we will need to edit the following files:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt><strong>config.yml</strong>: This file will contains all the information needed to</dt>
<dd>deploy the <code class="docutils literal"><span class="pre">AWS</span></code> environment successfully.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>08-create-aws-auto-scaling.yml</strong>: we will change the setup of the default <code class="docutils literal"><span class="pre">SSG</span></code></dt>
<dd>that gets deployed. we want to deploy 2 instances to review how it is setup as
part of a <code class="docutils literal"><span class="pre">SSG</span></code> group.</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="launch-our-ssg-update-config-yml">
<h2>2.5.4.2.3. Launch our <code class="docutils literal"><span class="pre">SSG</span></code> - Update config.yml<a class="headerlink" href="#launch-our-ssg-update-config-yml" title="Permalink to this headline">¶</a></h2>
<p>Use your favorite editor to update this file.</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">vi</span> <span class="pre">config.yml</span></code></div></blockquote>
<p>Here are the settings you will need to change to deploy everything successfully:</p>
<ul>
<li><dl class="first docutils">
<dt>AWS_ACCESS_KEY_ID: Use the <code class="docutils literal"><span class="pre">AWS</span> <span class="pre">Access</span> <span class="pre">Key</span></code> you retrieved from the previous</dt>
<dd><p class="first last">lab (IAM section).</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>AWS_SECRET_ACCESS_KEY: Use the <code class="docutils literal"><span class="pre">AWS</span> <span class="pre">Secret</span> <span class="pre">Access</span> <span class="pre">Key</span></code> you retrieve from the</dt>
<dd><p class="first last">previous lab (IAM section).</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>PREFIX: Specify a <code class="docutils literal"><span class="pre">prefix</span></code> that will be used on each object automatically</dt>
<dd><p class="first last">created. we will use <strong>udf-&lt;your NAME&gt;</strong>. For example: <strong>udf-MENANT</strong></p>
</dd>
</dl>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>DO NOT PUT a <code class="docutils literal"><span class="pre">-</span></code> at the end or your deployment will fail.</p>
<p>We need you to put something so that your PREFIX will be UNIQUE to you or it will overlap with
other student’s env. If your name is ‘common’, pick something else that should be unique or append
your first name to it.</p>
<p>Use udf- in the prefix or your <code class="docutils literal"><span class="pre">SSG</span></code> deployment will fail</p>
<p class="last">Remember that the PREFIX must be 10 CHARACTERS MAX</p>
</div>
</li>
<li><dl class="first docutils">
<dt>AWS_SSH_KEY: Use the <code class="docutils literal"><span class="pre">AWS</span> <span class="pre">Key</span> <span class="pre">Pair</span></code> we created in the previous lab. In our example, it was <strong>CE-Lab-MENANT</strong></dt>
<dd><p class="first last">but yours should have a different name.</p>
</dd>
</dl>
</li>
<li><p class="first">CUSTOMER_GATEWAY_IP: Use the Public IP Address of your BIG-IP <strong>SEA BIG-IP</strong> that you retrieved earlier.</p>
</li>
</ul>
<p>Save the config file.</p>
<p>Here is an example of the updated <strong>config.yml</strong> file:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="c1">##################################################################################################</span>
<span class="c1">###########################         UPDATE VARIABLE BELOW          ###############################</span>
<span class="c1">##################################################################################################</span>

<span class="n">AWS_ACCESS_KEY_ID</span><span class="p">:</span> <span class="o">*****************</span>
<span class="n">AWS_SECRET_ACCESS_KEY</span><span class="p">:</span> <span class="o">*********************</span>

<span class="c1"># A unique searchable prefix to all resources which are created</span>
<span class="c1"># Use a prefix w/o spaces or special characters (NO MORE THAN 10 CHARACTERS, no end with - or special characters)</span>
<span class="n">PREFIX</span><span class="p">:</span> <span class="n">udf</span><span class="o">-</span><span class="n">MENANT</span>

<span class="c1"># Select on of  the region below (default US EST N. Virginia)</span>
<span class="c1">#us-east-1</span>
<span class="c1">#us-east-2</span>
<span class="c1">#us-west-1</span>
<span class="c1">#us-west-2</span>
<span class="c1">#eu-central-1</span>
<span class="c1">#eu-west-1</span>
<span class="c1">#eu-west-2</span>
<span class="c1">#us-west-3</span>
<span class="c1">#ap-southeast-1</span>
<span class="c1">#ap-northeast-2</span>
<span class="n">DEFAULT_REGION</span><span class="p">:</span> <span class="n">us</span><span class="o">-</span><span class="n">east</span><span class="o">-</span><span class="mi">1</span>
<span class="n">AWS_US_EAST_1A</span><span class="p">:</span> <span class="n">us</span><span class="o">-</span><span class="n">east</span><span class="o">-</span><span class="mi">1</span><span class="n">a</span>
<span class="n">AWS_US_EAST_1B</span><span class="p">:</span> <span class="n">us</span><span class="o">-</span><span class="n">east</span><span class="o">-</span><span class="mi">1</span><span class="n">b</span>

<span class="c1"># Update your SSH AWS KEY (EC2 &gt; NETWORK &amp; SECURITY &gt; Key Pairs)</span>
<span class="n">AWS_SSH_KEY</span><span class="p">:</span> <span class="n">CE</span><span class="o">-</span><span class="n">Lab</span><span class="o">-</span><span class="n">MENANT</span>

<span class="c1"># Get the public IP of SEA-vBIGIP01.termmarc.com, go to Access Methods, e.g. nslookup 49efa5b7-224c-4e7b-9f04-cf52591ec443.access.udf.f5.com)</span>
<span class="c1"># Fill the IP address returned by the nslookup here</span>
<span class="c1"># /!\ IF THE IP ADDRESS ENDS WITH A x.x.x.0 (e.g. 129.43.54.0), DELETE YOUR DEPLOYMENT AND RESTART A NEW ONE.</span>
<span class="n">CUSTOMER_GATEWAY_IP</span><span class="p">:</span> <span class="mf">129.146</span><span class="o">.</span><span class="mf">19.143</span>

<span class="c1"># F5 Networks BYOL BIGIP-13.1.0.5-0.0.5 - Best - Mar 27 2018 8_21_31</span>
<span class="c1"># Oregon eu-west-2: ami-105b3b68</span>
<span class="c1"># Virginia us-east-1: ami-8fe13ff0</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We don’t have to change anything else as long as we use the US-East (N. Virginia) Region</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>in your <strong>config.yml</strong> file, you have the default password that will be used for the admin user
This password will be enforced on all the VEs deployed in your <code class="docutils literal"><span class="pre">SSG</span></code>.</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="c1"># BIG-IQ SSG CONFIG</span>
<span class="n">BIGIP_USER</span><span class="p">:</span> <span class="n">admin</span>
<span class="n">BIGIP_PWD</span><span class="p">:</span> <span class="o">**************</span>
</pre></div>
</div>
<p class="last">MAKE SURE TO NOTE IT SOMEWHERE</p>
</div>
</div>
<div class="section" id="launch-our-ssg-update-our-ssg-configuration">
<h2>2.5.4.2.4. Launch our <code class="docutils literal"><span class="pre">SSG</span></code> - Update our SSG configuration<a class="headerlink" href="#launch-our-ssg-update-our-ssg-configuration" title="Permalink to this headline">¶</a></h2>
<p>To update configuration pushed by the orchestrator, we will update the file called
<strong>08-create-aws-auto-scaling.yml</strong>. Use your favorite editor to update it</p>
<p>Look for this section in the file:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">include_tasks</span><span class="p">:</span> <span class="o">./</span><span class="n">helpers</span><span class="o">/</span><span class="n">post</span><span class="o">.</span><span class="n">yml</span>
  <span class="n">with_items</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">Create</span> <span class="n">service</span> <span class="n">scaling</span> <span class="n">group</span>
      <span class="n">url</span><span class="p">:</span> <span class="s2">&quot;{{BIGIQ_URI}}/cm/cloud/service-scaling-groups&quot;</span>
      <span class="n">body</span><span class="p">:</span> <span class="o">&gt;</span>
        <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;{{SSG_NAME}}&quot;</span><span class="p">,</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;AWS scaling group&quot;</span><span class="p">,</span>
            <span class="s2">&quot;environmentReference&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;link&quot;</span><span class="p">:</span> <span class="s2">&quot;https://localhost/mgmt/cm/cloud/environments/{{cloud_environment_result.id}}&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;minSize&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;maxSize&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
            <span class="s2">&quot;maxSupportedApplications&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
            <span class="s2">&quot;desiredSize&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;postDeviceCreationUserScriptReference&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
            <span class="s2">&quot;preDeviceDeletionUserScriptReference&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
            <span class="s2">&quot;scalingPolicies&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;scale-out&quot;</span><span class="p">,</span>
                <span class="s2">&quot;cooldown&quot;</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
                <span class="s2">&quot;direction&quot;</span><span class="p">:</span> <span class="s2">&quot;ADD&quot;</span><span class="p">,</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ChangeCount&quot;</span><span class="p">,</span>
                <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">1</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;scale-in&quot;</span><span class="p">,</span>
                <span class="s2">&quot;cooldown&quot;</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
                <span class="s2">&quot;direction&quot;</span><span class="p">:</span> <span class="s2">&quot;REMOVE&quot;</span><span class="p">,</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ChangeCount&quot;</span><span class="p">,</span>
                <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">1</span>
            <span class="p">}]</span>
        <span class="p">}</span>
</pre></div>
</div>
<p>Change the <strong>minSize</strong> and <strong>desiredSize</strong> from 1 to 2 :</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">include_tasks</span><span class="p">:</span> <span class="o">./</span><span class="n">helpers</span><span class="o">/</span><span class="n">post</span><span class="o">.</span><span class="n">yml</span>
  <span class="n">with_items</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">Create</span> <span class="n">service</span> <span class="n">scaling</span> <span class="n">group</span>
      <span class="n">url</span><span class="p">:</span> <span class="s2">&quot;{{BIGIQ_URI}}/cm/cloud/service-scaling-groups&quot;</span>
      <span class="n">body</span><span class="p">:</span> <span class="o">&gt;</span>
        <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;{{SSG_NAME}}&quot;</span><span class="p">,</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;AWS scaling group&quot;</span><span class="p">,</span>
            <span class="s2">&quot;environmentReference&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;link&quot;</span><span class="p">:</span> <span class="s2">&quot;https://localhost/mgmt/cm/cloud/environments/{{cloud_environment_result.id}}&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;minSize&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s2">&quot;maxSize&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
            <span class="s2">&quot;maxSupportedApplications&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
            <span class="s2">&quot;desiredSize&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s2">&quot;postDeviceCreationUserScriptReference&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
            <span class="s2">&quot;preDeviceDeletionUserScriptReference&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
            <span class="s2">&quot;scalingPolicies&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;scale-out&quot;</span><span class="p">,</span>
                <span class="s2">&quot;cooldown&quot;</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
                <span class="s2">&quot;direction&quot;</span><span class="p">:</span> <span class="s2">&quot;ADD&quot;</span><span class="p">,</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ChangeCount&quot;</span><span class="p">,</span>
                <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">1</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;scale-in&quot;</span><span class="p">,</span>
                <span class="s2">&quot;cooldown&quot;</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
                <span class="s2">&quot;direction&quot;</span><span class="p">:</span> <span class="s2">&quot;REMOVE&quot;</span><span class="p">,</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ChangeCount&quot;</span><span class="p">,</span>
                <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">1</span>
            <span class="p">}]</span>
        <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="launch-our-ssg-trigger-the-deployment">
<h2>2.5.4.2.5. Launch our <code class="docutils literal"><span class="pre">SSG</span></code> - Trigger the deployment<a class="headerlink" href="#launch-our-ssg-trigger-the-deployment" title="Permalink to this headline">¶</a></h2>
<p>Now that the relevant files have been updated, we can trigger the deployment.</p>
<p>To trigger the deployment, run the following command:</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">./000-RUN_ALL.sh</span> <span class="pre">nopause</span></code></div></blockquote>
<p>It will ask you to press Enter to confirm that you subscribed and agreed to
the EULA in the marketplace. Press enter to start the deployment.</p>
<p>You should see something like this:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span>f5@03a920f8b4c0410d8f:~/AWS-CFT-Cloud-Edition$ ./000-RUN_ALL.sh nopause

Did you subscribed and agreed to the software terms in AWS Marketplace?


https://aws.amazon.com/marketplace/search/results?page=1&amp;filters=pricing_plan_attributes&amp;pricing_plan_attributes=BYOL&amp;searchTerms=F5+BIG-IP


Press [Enter] key to continue... CTRL+C to Cancel
[DEPRECATION WARNING]: [defaults]hostfile option, The key is misleading as it can also be a list of hosts, a directory or a list of paths , use [defaults] inventory=/path/to/file|dir
instead. This feature will be removed in version 2.8. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.

PLAY [Install and configure dependencies and verify environment] ************************************************************************************************************************

TASK [Gathering Facts] ******************************************************************************************************************************************************************
ok: [localhost]

TASK [command] **************************************************************************************************************************************************************************
changed: [localhost]

TASK [command] **************************************************************************************************************************************************************************
changed: [localhost]

TASK [command] **************************************************************************************************************************************************************************
changed: [localhost]

TASK [command] **************************************************************************************************************************************************************************
changed: [localhost]

TASK [command] **************************************************************************************************************************************************************************
changed: [localhost]

PLAY RECAP ******************************************************************************************************************************************************************************
localhost                  : ok=6    changed=5    unreachable=0    failed=0

[DEPRECATION WARNING]: [defaults]hostfile option, The key is misleading as it can also be a list of hosts, a directory or a list of paths , use [defaults] inventory=/path/to/file|dir
instead. This feature will be removed in version 2.8. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.

PLAY [Deploy prerequisite infrastructure for SSG to AWS] ********************************************************************************************************************************

TASK [Gathering Facts] ******************************************************************************************************************************************************************
ok: [localhost]

TASK [Set AWS Region] *******************************************************************************************************************************************************************
changed: [localhost]

TASK [Retrieve available subnets] *******************************************************************************************************************************************************
ok: [localhost]

TASK [Fail if there aren&#39;t enough availability zones] ***********************************************************************************************************************************
skipping: [localhost]

TASK [Build VPC CloudFormation] *********************************************************************************************************************************************************
</pre></div>
</div>
<p>At this stage, we should start deploying your environment in <code class="docutils literal"><span class="pre">AWS</span></code>.
In your <code class="docutils literal"><span class="pre">AWS</span> <span class="pre">Console</span></code>, go to <strong>Services</strong> &gt; <strong>CloudFormation</strong>.</p>
<a class="reference internal image-reference" href="../../_images/img_module4_lab2_3.png"><img alt="../../_images/img_module4_lab2_3.png" class="align-center" src="../../_images/img_module4_lab2_3.png" style="width: 784.0px; height: 220.0px;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Here we can see that <code class="docutils literal"><span class="pre">CloudFormation</span> <span class="pre">Stacks</span></code> are being deployed with the prefix
<strong>udf-MENANT</strong> as mentioned in <strong>config.yml</strong> file (prefix attribute)</p>
<p>In the next lab, we will review what has been setup on <code class="docutils literal"><span class="pre">BIG-IQ</span></code> and what was
deployed in our <code class="docutils literal"><span class="pre">AWS</span> <span class="pre">VPC</span></code>.</p>
</div>
</div>


        
		     <div class="row next-prev-btn-row">
           <div class="col-lg-12">
           
		        <a href="lab1.html" title="2.5.4.1. Lab 4.1: Prepare our AWS deployment" accesskey="p" class="btn btn-primary pull-left"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous</a>
           
           
              <a href="lab3.html" title="2.5.4.3. Lab 4.3: Review our SSG deployment in AWS" accesskey="n" class="btn btn-primary pull-right">Next <i class="fa fa-arrow-circle-right" aria-hidden="true"></i></a>
           
		     </div>
         </div>
        
      </div>
    </div>
  </div>


  <footer>
      <div class="container-fluid">
        <div class="row">
          <div class="content-fluid pre-footer">
            <div class="blocks-container">
              <div class="block">
                <h3>Support Programs</h3>
                <p>Regionally located support centers enable F5 to provide support in a number of languages through native-speaking support engineers.</p>
                <a class="btn internalLink" data-ng-href="https://f5.com/support/support-offerings" target="_blank" href="https://f5.com/support/support-offerings">See more
                  <span class="icon-1x-right icon-new-window" data-icon="new-window">​</span>
                </a>
              </div>
              <div class="block">
                <h3>Contact Support</h3>
                <p>
                  North America: 1-888-882-7535<br>
                  Outside North America: 800-11-275-435
                </p>
                <a class="btn internalLink" data-ng-href="https://f5.com/about-us/contact#regional-support" target="_blank" href="https://f5.com/about-us/contact#regional-support">Local Support Numbers
                  <span class="icon-1x-right icon-new-window" data-icon="new-window">​</span>
                </a>
              </div>
              <div class="block">
                <h3>Feedback and Help</h3>
                <p>Have questions, suggestions, or just want to get something off your chest? Let us know.</p>
                <a class="btn" data-ui-sref="siteFeedback" target="_blank" href="https://support.f5.com/csp/siteFeedback">Leave feedback</a>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="footer">
            <div class="container">
              <div class="col-sm-3 col-md-2">
                <h4>About F5</h4>
                <ul>
                  <li><a data-ng-href="https://f5.com/about-us/contact" target="_blank" data-link-type="footer" href="https://f5.com/about-us/contact" class="internalLink">Contact F5</a>
                  </li>
                  <li><a data-ng-href="https://f5.com/about-us/careers" target="_blank" data-link-type="footer" href="https://f5.com/about-us/careers" class="internalLink">Careers</a>
                  </li>
                </ul>
              </div>
              <div class="col-sm-3 col-md-2">
                <h4>Education</h4>
                <ul>
                  <li><a data-ng-href="https://f5.com/education/training" target="_blank" data-link-type="footer" href="https://f5.com/education/training" class="internalLink">Training</a>
                  </li>
                  <li><a data-ng-href="https://f5.com/education/certification" target="_blank" data-link-type="footer" href="https://f5.com/education/certification" class="internalLink">Certification</a>
                  </li>
                  <li><a data-ng-href="https://f5.com/education/training/free-courses" target="_blank" data-link-type="footer" href="https://f5.com/education/training/free-courses" class="internalLink">Free Online Training</a>
                  </li>
                </ul>
              </div>

              <div class="col-sm-3 col-md-2">
                <h4>F5 sites</h4>
                <ul>
                <li><a data-ng-href="https://f5.com" target="_blank" data-link-type="footer" href="https://f5.com" class="internalLink">F5.com</a>
                </li>
                <li><a data-ng-href="https://devcentral.f5.com" target="_blank" data-link-type="footer" href="https://devcentral.f5.com" class="internalLink">Community</a>
                </li>
                <li><a data-ng-href="https://partners.f5.com" target="_blank" data-link-type="footer" href="https://partners.f5.com" class="internalLink">Partners</a>
                </li>
            </ul>
        </div>

        <div class="col-sm-3 col-md-2">
            <h4>Support Tasks</h4>
            <ul>
                <li><a data-ui-sref="mySupport.createServiceRequest" data-link-type="footer" href="https://support.f5.com/csp/my-support/service-request">Create Service Request </a>
                </li>
                <li><a data-ng-href="https://f5.com/about-us/contact#regional-support" target="_blank" data-link-type="footer" href="https://f5.com/about-us/contact#regional-support" class="internalLink">Contact Support</a>
                </li>
                <li><a data-ui-sref="siteFeedback" target="_blank" data-link-type="footer" href="https://support.f5.com/csp/siteFeedback">Leave feedback [+]</a>
                </li>
            </ul>
        </div>

        <div class="col-xs-12 col-md-3 right">
            <h4>Connect with us</h4>
            <ul class="social_icons">
                <li><a href="//twitter.com/f5networks" target="_blank" data-name="twitter" data-type="" data-prefix="social" data-utf="E032" title="Twitter" class="externalLink"><i class="icon-1x icon-twitter icon-inverse-circle" data-link-type="footer"></i></a></li>
                <li><a href="//www.linkedin.com/companies/f5-networks" target="_blank" class="linkedin externalLink" title="LinkedIn"><i class="icon-1x icon-linkedin icon-inverse-circle" data-link-type="footer"></i></a></li>
                <li><a href="//www.facebook.com/f5networksinc" target="_blank" class="facebook externalLink" title="Facebook"><i class="icon-1x icon-facebook icon-inverse-circle" data-link-type="footer"></i></a></li>
                <li><a href="//www.youtube.com/f5networksinc" target="_blank" class="youtube externalLink" title="YouTube"><i class="icon-1x icon-youtube icon-inverse-circle" data-link-type="footer"></i></a></li>
                <li><a data-ng-href="https://devcentral.f5.com" target="_blank" class="devcentral internalLink" title="DevCentral" href="https://devcentral.f5.com"><i class="icon-1x icon-dc-pos icon-inverse-circle" data-link-type="footer"></i></a></li>
            </ul>
        </div>

        <div class="content-fluid left">
            <div class="col-xs-12">
                <p>
                    © Copyright <span class="ng-binding">2017</span> by F5 Networks, Inc. |
                    <a data-ng-href="https://f5.com/about-us/policies" target="_blank" data-link-type="footer" href="https://f5.com/about-us/policies" class="internalLink">Policies</a> |
                    <a data-ng-href="https://f5.com/about-us/policies/trademarks" target="_blank" data-link-type="footer" href="https://f5.com/about-us/policies/trademarks" class="internalLink">Trademarks</a>
                </p>
            </div>
        </div>
    </div>
</div>
    </div>
</div>
</footer>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="../../_static/js/bootstrap.min.js"></script>
  <script type="text/javascript">
    jQuery.noConflict(true)
  </script>
  </body>
</html>